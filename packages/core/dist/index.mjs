var u=Object.defineProperty;var s=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var m=(r,e,t)=>e in r?u(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,n=(r,e)=>{for(var t in e||(e={}))g.call(e,t)&&m(r,t,e[t]);if(s)for(var t of s(e))y.call(e,t)&&m(r,t,e[t]);return r};import{render as O}from"ejs";function h(r){let e=[];return r.length&&r.forEach(t=>{switch(t.type){case"javascript":e.push({tag:"script",attrs:n({src:t.url},t.attrs),injectTo:t.position||"head"});break;default:e.push({tag:"link",attrs:n({href:t.url},t.attrs),injectTo:t.position||"head"});break}}),e}function a(r){let{data:e,ejsOptions:t,sources:o=[]}=r;return{name:"vite-parse-html",enforce:"pre",transformIndexHtml:{enforce:"pre",async transform(f){return{html:await O(f,e,t),tags:h(o)}}}}}import{createFilter as j}from"@rollup/pluginutils";var c=j(["**/*.html"]);import{minify as P}from"html-minifier-terser";function I(r){return{collapseWhitespace:r,keepClosingSlash:r,removeComments:r,minifyCSS:r}}function l({isMinify:r=!0}){return{name:"vite: minify-html",enforce:"post",async generateBundle(e,t){if(r)for(let o of Object.values(t))o.type==="asset"&&c(o.fileName)&&typeof o.source=="string"&&(o.source=await P(o.source,I(r)))}}}var D=r=>{let{inject:e={},minifyOpt:t={}}=r;return[a(e),l(t)]};export{D as default,a as inject,l as minify};
